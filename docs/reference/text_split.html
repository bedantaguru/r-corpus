<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Segmenting Text — text_split • corpus</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Google analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-4636081-3', 'auto');
  ga('send', 'pageview');

</script>

  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">corpus</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/corpus.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/chinese.html">Chinese text handling</a>
    </li>
    <li>
      <a href="../articles/gender.html">Finding gendered words</a>
    </li>
    <li>
      <a href="../articles/textdata.html">Text data in Corpus and other packages</a>
    </li>
    <li>
      <a href="../articles/unicode.html">Unicode: Emoji, accents, and international text</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Segmenting Text</h1>
    </div>

    
    <p>Segment text into smaller units.</p>
    

    <pre class="usage"><span class='fu'>text_split</span>(<span class='no'>x</span>, <span class='kw'>units</span> <span class='kw'>=</span> <span class='st'>"sentences"</span>, <span class='kw'>size</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>filter</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)

<span class='fu'>text_nsentence</span>(<span class='no'>x</span>, <span class='kw'>filter</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>a text or character vector.</p></td>
    </tr>
    <tr>
      <th>units</th>
      <td><p>the block size units, either <code>"sentences"</code> or
    <code>"tokens"</code>.</p></td>
    </tr>
    <tr>
      <th>size</th>
      <td><p>the block size, a positive integer giving the maximum
    number of units per block.</p></td>
    </tr>
    <tr>
      <th>filter</th>
      <td><p>if non-<code>NULL</code>, a text filter to to use instead of
    the default text filter for <code>x</code>.</p></td>
    </tr>
    <tr>
      <th>&#8230;</th>
      <td><p>additional properties to set on the text filter.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>text_split</code> splits text into roughly evenly-sized blocks,
    measured in the specified units.  When <code>units = "sentences"</code>,
    units are sentences; when <code>units = "tokens"</code>, units are
    non-<code>NA</code> tokens. The <code>size</code> parameter specifies the
    maximum block size.</p>
<p>When the minimum block size does not evenly divide the number of
    total units in a text, the block sizes will not be exactly equal.
    However, it will still be the case that no block will has more
    than one unit more than any other block. The extra units get
    allocated to the first segments in the split.</p>
<p>Sentences and tokens are defined by the <code>filter</code> argument.
    The documentation for <code><a href='text_tokens.html'>text_tokens</a></code> describes the
    tokenization rules. For sentence boundaries, see the
    &#8216;Sentences&#8217; section below.</p>
    
    <h2 class="hasAnchor" id="sentences"><a class="anchor" href="#sentences"></a>Sentences</h2>

    <p>Sentences are defined according to a tailored version of the
    boundaries specified by
    <a href='http://unicode.org/reports/tr29/#Sentence_Boundaries'>Unicode
        Standard Annex #29, Section 5</a>.</p>
<p>The UAX 29 sentence boundaries handle Unicode correctly and they give
    reasonable behavior across a variety of languages, but they do not
    handle abbreviations correctly and by default they treat carriage
    returns and line feeds as paragraph separators, often leading to
    incorrect breaks. To get around these shortcomings, the
    text filter allows tailoring the UAX 29 rules using the
    <code>sent_crlf</code> and the <code>sent_suppress</code> properties.</p>
<p>The UAX 29 rules break after full stops (periods) whenever they are
    followed by uppercase letters. Under these rules, the text
    <code>"I saw Mr. Jones today."</code> gets split into two sentences. To get
    around this, we allow a <code>sent_suppress</code> property, a list of sentence
    break suppressions which, when followed by uppercase characters, do
    not signal the end of a sentence.</p>
<p>The UAX 29 rules also specify that a carriage return (CR) or line
    feed (LF) indicates the end of of a sentence, so that
    <code>"A split\nsentence."</code> gets split into two sentences. This often
    leads to incorrect breaks, so by default, with <code>sent_crlf = FALSE</code>,
    we deviate from the UAX 29 rules and we treat CR and LF like spaces.
    To break sentences on CRLF, CR, and LF, specify <code>sent_crlf = TRUE</code>.</p>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>text_split</code> returns a data frame with three columns named
    <code>parent</code>, <code>index</code>, and <code>text</code>, and one row for each
    text block. The columns are as follows:</p>
<p></p><ol>
<li><p>The <code>parent</code> column is a factor. The levels of this
          factor are the names of <code><a href='corpus_text.html'>as_corpus_text(x)</a></code>. Calling
          <code>as.integer</code> on the parent column gives the indices of
          the parent texts for the parent text for each sentence.</p></li>
<li><p>The <code>index</code> column gives the integer index of the
            sentence in its parent.</p></li>
<li><p>The <code>text</code> value is the text of the block, a value of
            type <code><a href='corpus_text.html'>corpus_text</a></code> (not a character vector).</p></li>
</ol>

<p><code>text_nsentence</code> returns a numeric vector with the same length
    as <code>x</code> with each element giving the number of sentences in the
    corresponding text.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='text_tokens.html'>text_tokens</a></code>, <code><a href='text_filter.html'>text_filter</a></code>.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>text</span> <span class='kw'>&lt;-</span> <span class='fu'>c</span>(<span class='st'>"I saw Mr. Jones today."</span>,
          <span class='st'>"Split across\na line."</span>,
          <span class='st'>"What. Are. You. Doing????"</span>,
          <span class='st'>"She asked 'do you really mean that?' and I said 'yes.'"</span>)

<span class='co'># split text into sentences</span>
<span class='fu'>text_split</span>(<span class='no'>text</span>, <span class='kw'>units</span> <span class='kw'>=</span> <span class='st'>"sentences"</span>)</div><div class='output co'>#&gt;   parent index text                                 
#&gt; 1 1          1 I saw Mr. Jones today.               
#&gt; 2 2          1 Split across\na line.                
#&gt; 3 3          1 What.                                
#&gt; 4 3          2 Are.                                 
#&gt; 5 3          3 You.                                 
#&gt; 6 3          4 Doing????                            
#&gt; 7 4          1 She asked 'do you really mean that?' 
#&gt; 8 4          2 and I said 'yes.'                    </div><div class='input'>
<span class='co'># get the number of sentences</span>
<span class='fu'>text_nsentence</span>(<span class='no'>text</span>)</div><div class='output co'>#&gt; [1] 1 1 4 2</div><div class='input'>
<span class='co'># disable the default sentence suppressions</span>
<span class='fu'>text_split</span>(<span class='st'>"I saw Mr. Jones today."</span>, <span class='kw'>units</span> <span class='kw'>=</span> <span class='st'>"sentences"</span>, <span class='kw'>filter</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</div><div class='output co'>#&gt;   parent index text                  
#&gt; 1 1          1 I saw Mr. Jones today.</div><div class='input'>
<span class='co'># break on CR and LF</span>
<span class='fu'>text_split</span>(<span class='st'>"Split across\na line."</span>, <span class='kw'>units</span> <span class='kw'>=</span> <span class='st'>"sentences"</span>,
           <span class='kw'>filter</span> <span class='kw'>=</span> <span class='fu'><a href='text_filter.html'>text_filter</a></span>(<span class='kw'>sent_crlf</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>))</div><div class='output co'>#&gt;   parent index text          
#&gt; 1 1          1 Split across\n
#&gt; 2 1          2 a line.       </div><div class='input'>
<span class='co'># 2-sentence blocks</span>
<span class='fu'>text_split</span>(<span class='fu'>c</span>(<span class='st'>"What. Are. You. Doing????"</span>,
           <span class='st'>"She asked 'do you really mean that?' and I said 'yes.'"</span>),
           <span class='kw'>units</span> <span class='kw'>=</span> <span class='st'>"sentences"</span>, <span class='kw'>size</span> <span class='kw'>=</span> <span class='fl'>2</span>)</div><div class='output co'>#&gt;   parent index text                                                  
#&gt; 1 1          1 What. Are.                                            
#&gt; 2 1          2 You. Doing????                                        
#&gt; 3 2          1 She asked 'do you really mean that?' and I said 'yes.'</div><div class='input'>
<span class='co'># 4-token blocks</span>
<span class='fu'>text_split</span>(<span class='fu'>c</span>(<span class='st'>"What. Are. You. Doing????"</span>,
             <span class='st'>"She asked 'do you really mean that?' and I said 'yes.'"</span>),
           <span class='kw'>units</span> <span class='kw'>=</span> <span class='st'>"tokens"</span>, <span class='kw'>size</span> <span class='kw'>=</span> <span class='fl'>4</span>)</div><div class='output co'>#&gt;   parent index text                
#&gt; 1 1          1 What. Are.          
#&gt; 2 1          2 You. Doing?         
#&gt; 3 1          3 ???                 
#&gt; 4 2          1 She asked 'do       
#&gt; 5 2          2 you really mean that
#&gt; 6 2          3 ?' and              
#&gt; 7 2          4 I said '            
#&gt; 8 2          5 yes.'               </div><div class='input'>
<span class='co'># blocks are approximately evenly sized; 'size' gives maximum size</span>
<span class='fu'>text_split</span>(<span class='fu'>paste</span>(<span class='no'>letters</span>, <span class='kw'>collapse</span> <span class='kw'>=</span> <span class='st'>" "</span>), <span class='st'>"tokens"</span>, <span class='fl'>4</span>)</div><div class='output co'>#&gt;   parent index text    
#&gt; 1 1          1 a b c d 
#&gt; 2 1          2 e f g h 
#&gt; 3 1          3 i j k l 
#&gt; 4 1          4 m n o p 
#&gt; 5 1          5 q r s t 
#&gt; 6 1          6 u v w   
#&gt; 7 1          7 x y z   </div><div class='input'><span class='fu'>text_split</span>(<span class='fu'>paste</span>(<span class='no'>letters</span>, <span class='kw'>collapse</span> <span class='kw'>=</span> <span class='st'>" "</span>), <span class='st'>"tokens"</span>, <span class='fl'>16</span>)</div><div class='output co'>#&gt;   parent index text                      
#&gt; 1 1          1 a b c d e f g h i j k l m 
#&gt; 2 1          2 n o p q r s t u v w x y z </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>

      <li><a href="#sentences">Sentences</a></li>

      <li><a href="#value">Value</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Patrick O. Perry.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
