<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Finding gendered words • corpus</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Google analytics --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-4636081-3', 'auto');
  ga('send', 'pageview');

</script>
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">corpus</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/corpus.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/chinese.html">Chinese text handling</a>
    </li>
    <li>
      <a href="../articles/gender.html">Finding gendered words</a>
    </li>
    <li>
      <a href="../articles/textdata.html">Text data in Corpus and other packages</a>
    </li>
    <li>
      <a href="../articles/unicode.html">Unicode: Emoji, accents, and international text</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Finding gendered words</h1>
            
          </div>

    
    
<div class="contents">
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>In this vignette, we will look for gender-associated words We will do this by looking for words that follow the pronoun “she” more often than “he”, or vice-versa. The vignette is based on Julia Silge’s blog post, <a href="https://juliasilge.com/blog/gender-pronouns/" title="Gender roles with text mining and n-grams">“Gender roles with text mining and n-grams”</a>.</p>
<p>We will use the <em>corpus</em> package, but not rely on any other external dependencies. The set-up is as follows.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">"corpus"</span>)

<span class="co"># colors from RColorBrewer::brewer.pal(6, "Set1")</span>
<span class="kw">palette</span>(<span class="kw">c</span>(<span class="st">"#E41A1C"</span>, <span class="st">"#377EB8"</span>, <span class="st">"#4DAF4A"</span>, <span class="st">"#984EA3"</span>, <span class="st">"#FF7F00"</span>, <span class="st">"#FFFF33"</span>))

<span class="co"># ensure consistent runs</span>
<span class="kw">set.seed</span>(<span class="dv">0</span>) </code></pre></div>
</div>
<div id="gender-bigrams-in-austens-novels" class="section level2">
<h2 class="hasAnchor">
<a href="#gender-bigrams-in-austens-novels" class="anchor"></a>Gender bigrams in Austen’s novels</h2>
<p>We will be studying gender in the context of Jane Austen’s completed novels, downloaded from <a href="https://www.gutenberg.org/" title="Project Gutenberg">Project Gutenberg</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Gutenberg IDs gotten from gutenbergr::gutenberg_works(author == "Austen, Jane")</span>
(austen &lt;-<span class="st"> </span><span class="kw"><a href="../reference/gutenberg_corpus.html">gutenberg_corpus</a></span>(<span class="kw">c</span>(<span class="dv">161</span>, <span class="dv">1342</span>, <span class="dv">141</span>, <span class="dv">158</span>, <span class="dv">121</span>, <span class="dv">105</span>)))</code></pre></div>
<pre><code>Determining mirror for Project Gutenberg from https://www.gutenberg.org/MIRRORS.ALL</code></pre>
<pre><code>Using mirror http://mirrors.xmission.com/gutenberg/</code></pre>
<pre><code>Converting text from declared encoding "ISO-8859-1" to UTF-8</code></pre>
<pre><code>  title                 author      language text                                                   
1 Sense and Sensibility Jane Austen English  SENSE AND SENSIBILITY\n\nby Jane Austen\n\n(1811)\n\n… 
2 Pride and Prejudice   Jane Austen English  PRIDE AND PREJUDICE\n\nBy Jane Austen\n\n\n\nChapter 1…
3 Mansfield Park        Jane Austen English  MANSFIELD PARK\n\n(1814)\n\n\nBy Jane Austen\n\n\n\n\n…
4 Emma                  Jane Austen English  EMMA\n\nBy Jane Austen\n\n\n\n\nVOLUME I\n\n\n\nCHAPTE…
5 Northanger Abbey      Jane Austen English  NORTHANGER ABBEY\n\n\nby\n\nJane Austen (1803)\n\n\n\n…
6 Persuasion            Jane Austen English  Persuasion\n\n\nby\n\nJane Austen\n\n(1818)\n\n\n\n\nC…</code></pre>
<p>For tokens, we will be using the lower-cased non-punctuation words</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/text_filter.html">text_filter</a></span>(austen)<span class="op">$</span>drop_punct &lt;-<span class="st"> </span><span class="ot">TRUE</span></code></pre></div>
<p>Specifically, we will look at the bigrams from these novels where the first type is a pronoun.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pronouns &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"he"</span>, <span class="st">"she"</span>)
bigram_counts &lt;-<span class="st"> </span><span class="kw"><a href="../reference/term_stats.html">term_stats</a></span>(austen, <span class="dt">ngrams =</span> <span class="dv">2</span>, <span class="dt">types =</span> <span class="ot">TRUE</span>,
                            <span class="dt">subset =</span> type1 <span class="op">%in%</span><span class="st"> </span>pronouns)
<span class="kw">print</span>(bigram_counts)</code></pre></div>
<pre><code>   term      type1 type2  count support
1  she had   she   had     1472       6
2  she was   she   was     1377       6
3  he had    he    had     1023       6
4  he was    he    was      889       6
5  she could she   could    817       6
6  he is     he    is       398       6
7  she would she   would    381       6
8  she is    she   is       327       6
9  he could  he    could    307       6
10 he would  he    would    263       6
11 she did   she   did      225       6
12 he has    he    has      219       6
13 he did    he    did      191       6
14 she felt  she   felt     189       6
15 she must  she   must     184       6
16 she might she   might    173       6
17 he should he    should   158       6
18 she has   she   has      148       6
19 he must   he    must     142       6
20 he might  he    might    137       6
⋮  (1448 rows total)</code></pre>
<p>Above, we can see the most common bigrams with gendered pronouns as their first types.</p>
<p>Next, we rearrange the data into tabular form, with one row for each term and one column for each pronoun:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">terms &lt;-<span class="st">  </span><span class="kw">with</span>(bigram_counts,
               <span class="kw">tapply</span>(count, <span class="kw">list</span>(type2, type1), identity, <span class="dt">default =</span> <span class="dv">0</span>))
<span class="kw">head</span>(terms)</code></pre></div>
<pre><code>        he she
_did_    4   1
_had     1   0
_had_    2   4
_is_     0   1
_may_    1   0
_meant_  0   1</code></pre>
<p>It looks like some terms get emphasized in the text by underscores. We can investigate some of these:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># inspect a random sample of the occurrences</span>
<span class="kw"><a href="../reference/text_locate.html">text_locate</a></span>(austen, <span class="kw">c</span>(<span class="st">"_did_"</span>, <span class="st">"_had"</span>, <span class="st">"_meant_"</span>), <span class="dt">random =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>   text                  before                   instance                   after                  
13 3    … surprise to herself. And the\nnext day   _did_    bring a surprise to her. Henry had said…
4  2    …t home,” cried Elizabeth; “perhaps she\n _meant_   well, but, under such a misfortune as t…
5  2    …h had been brought on by himself. If he    _had    another_\nmotive, I am sure it would ne…
7  2    …you would never come back again. People   _did_    say\nyou meant to quit the place entire…
10 3    …ugh he\nis Henry, for a time.”\n\nJulia   _did_    suffer, however, though Mrs. Grant disc…
2  2    …dmired her--indeed I rather believe he\n  _did_   --I heard something about it--but I hard…
8  2    …d\nhumour encouraged, yet, whenever she   _did_    speak, she must be vulgar.\nNor was her…
11 3    …e the others prepared to begin.\n\nThey   _did_    begin; and being too much engaged in th…
14 4    …a,\nin her own mind, determined that he   _did_    know what he was talking\nabout, and th…
6  2    …om the\nfirst, you may remember.”\n\n“I   _did_    hear, too, that there was a time, when …
1  2    …danced with her twice. To be\nsure that   _did_    seem as if he admired her--indeed I rat…
12 3    …he found, from Edmund’s manner, that he   _did_    mean to\ngo with her. He too was taking…
3  2    …ally evident whenever they met, that he   _did_    admire her and\nto _her_ it was equally…
9  3    …r be\nheard of beyond themselves. Julia   _did_    seem inclined to admit that\nMaria’s si…</code></pre>
<p>Let’s clean the terms by removing underscores, and recompute the counts:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">terms &lt;-<span class="st">  </span><span class="kw">with</span>(bigram_counts,
               <span class="kw">tapply</span>(count, <span class="kw">list</span>(<span class="kw">gsub</span>(<span class="st">"_"</span>, <span class="st">""</span>, type2), type1),
                      sum, <span class="dt">default =</span> <span class="dv">0</span>))
<span class="kw">head</span>(terms)</code></pre></div>
<pre><code>           he she
a           4   6
able        0   1
abominates  1   0
absented    0   1
absolutely  3   1
abstained   0   1</code></pre>
<p>Here, we changed the aggregation function from <code>identity()</code> to <code>sum()</code> to sum the counts over all types that are equal after removing underscores.</p>
</div>
<div id="gender-specific-usage-rates" class="section level2">
<h2 class="hasAnchor">
<a href="#gender-specific-usage-rates" class="anchor"></a>Gender-specific usage rates</h2>
<p>We want to find terms that are associated with particular gendered pronouns. As an example, take term “loves”:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">term &lt;-<span class="st"> "loves"</span>
i &lt;-<span class="st"> </span><span class="kw">match</span>(term, <span class="kw">rownames</span>(terms))
tab &lt;-<span class="st"> </span><span class="kw">cbind</span>(terms[i,], <span class="kw">colSums</span>(terms[<span class="op">-</span>i,]))
<span class="kw">colnames</span>(tab) &lt;-<span class="st"> </span><span class="kw">c</span>(term, <span class="kw">paste0</span>(<span class="st">"\u00ac"</span>, term))
<span class="kw">print</span>(tab)</code></pre></div>
<pre><code>    loves ¬loves
he      5   6988
she     7   9875</code></pre>
<p>When the first type in a bigram is “he”, it is followed by “loves” in 5 instances and another type in 6988 instances. Here are the relative rates of “loves”, conditional on the first type in the bigram:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(rates &lt;-<span class="st"> </span>tab[,<span class="st">"loves"</span>] <span class="op">/</span><span class="st"> </span><span class="kw">rowSums</span>(tab))</code></pre></div>
<pre><code>          he          she 
0.0007150007 0.0007083586 </code></pre>
<p>The ratio of these rates is very close to one:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">rates[[<span class="st">"she"</span>]] <span class="op">/</span><span class="st"> </span>rates[[<span class="st">"he"</span>]]</code></pre></div>
<pre><code>[1] 0.9907104</code></pre>
<p>The log (base-2) ratio of the rates is close to zero:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log2</span>(rates[[<span class="st">"she"</span>]]) <span class="op">-</span><span class="st"> </span><span class="kw">log2</span>(rates[[<span class="st">"he"</span>]])</code></pre></div>
<pre><code>[1] -0.01346472</code></pre>
<p>This log ratio is a good measure of the strength of association. When the value is close to zero, there is no meaningful association. For large absolute log ratios, we would say that there is a meaningful difference in usage between the genders.</p>
<p>We compute the log ratios for all types. To avoid dividing by zero, and to smooth the estimates when the counts are small, we add 0.5 to the count when estimating the rate. (Many people smooth by adding 1, but I prefer 0.5 since that value has stronger theoretical justification.)</p>
<p>Some terms only appear once in the corpus. The rate estimates for these terms will be unreliable, so we discard them.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tot &lt;-<span class="st"> </span><span class="kw">colSums</span>(terms)
common_terms &lt;-<span class="st"> </span>terms[<span class="kw">rowSums</span>(terms) <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>,]
he  &lt;-<span class="st"> </span>(common_terms[,<span class="st">"he"</span>] <span class="op">+</span><span class="st"> </span><span class="fl">0.5</span>) <span class="op">/</span><span class="st"> </span>(tot[[<span class="st">"he"</span>]] <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)
she &lt;-<span class="st"> </span>((common_terms[,<span class="st">"she"</span>] <span class="op">+</span><span class="st"> </span><span class="fl">0.5</span>) <span class="op">/</span><span class="st"> </span>(tot[[<span class="st">"she"</span>]] <span class="op">+</span><span class="st"> </span><span class="dv">1</span>))
log2_ratio &lt;-<span class="st"> </span><span class="kw">log2</span>(she) <span class="op">-</span><span class="st"> </span><span class="kw">log2</span>(he)</code></pre></div>
<p>Here are a histogram and normal probability plot of the estimates for the remaining terms.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))
<span class="kw">hist</span>(log2_ratio, <span class="dt">breaks =</span> <span class="st">"Scott"</span>, <span class="dt">col =</span> <span class="dv">2</span>, <span class="dt">border =</span> <span class="st">"white"</span>)
<span class="kw">qqnorm</span>(log2_ratio, <span class="dt">col =</span> <span class="dv">2</span>)
<span class="kw">qqline</span>(log2_ratio, <span class="dt">col =</span> <span class="dv">1</span>, <span class="dt">lty =</span> <span class="dv">2</span>)</code></pre></div>
<div class="figure">
<img src="gender-estimates-1.png" alt="Rate Ratio Estimates"><p class="caption">Rate Ratio Estimates</p>
</div>
<p>This doesn’t quite look like a normal, but the distribution is symmetric, and the tails are about as heavy as those of a normal. So, the z-score will be a reasonable measure of how typical or unusual each log rate is.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">z &lt;-<span class="st"> </span>(log2_ratio <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(log2_ratio)) <span class="op">/</span><span class="st"> </span><span class="kw">sd</span>(log2_ratio)</code></pre></div>
<p>Here are the words more than two standard deviations away from the mean log ratio:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sort</span>(log2_ratio[<span class="kw">abs</span>(z) <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span>])</code></pre></div>
<pre><code>   gravely   believes      bowed    intends       next         or      quite     sought      won't 
 -3.958263  -3.306186  -3.306186  -3.306186  -3.306186  -3.306186  -3.306186  -3.306186  -3.306186 
    beheld        lay      looks    refused    checked    dreaded    eagerly     seized    hurried 
  3.201608   3.201608   3.201608   3.201608   3.408059   3.408059   3.408059   3.408059   3.588632 
remembered 
  4.545563 </code></pre>
<p>The terms “remembered”, “hurried”, and “seized” have more “she” usages; the terms “gravely”, “believes”, and “bowed” have more “he” usages.</p>
</div>
<div id="uncertainty-quantification" class="section level2">
<h2 class="hasAnchor">
<a href="#uncertainty-quantification" class="anchor"></a>Uncertainty quantification</h2>
<p>It’s hard to know which of these differences are meaningful without quantifying the error associated with the estimates. Some words are common, and we have reliable estimates of the log ratios. Other words are rare, and the estimates are based on a small number of occurrences. In the rare case, the estimates of the log ratios will be unreliable.</p>
<p>We need standard errors of our estimates. We can get these by starting with the proportion estimates <code>he</code> and <code>she</code>, and then applying the <a href="https://en.wikipedia.org/wiki/Delta_method">delta method</a>.</p>
<p>The <code>he</code> and <code>she</code> rates are proportions. We get their standard errors by using the usual formula for the standard error of a proportion, based on the Binomial variance formula:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">he_se &lt;-<span class="st"> </span><span class="kw">sqrt</span>(he <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">-</span><span class="st"> </span>he) <span class="op">/</span><span class="st"> </span>tot[[<span class="st">"he"</span>]])
she_se &lt;-<span class="st"> </span><span class="kw">sqrt</span>(she <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">-</span><span class="st"> </span>she) <span class="op">/</span><span class="st"> </span>tot[[<span class="st">"she"</span>]])</code></pre></div>
<p>To find the standard errors for the logarithms of these quantities, we use the delta method. We multiply the standard error by the absolute value of the derivative of the logarithm function evaluated at the estimate:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">log2_he_se &lt;-<span class="st"> </span><span class="kw">abs</span>(<span class="dv">1</span> <span class="op">/</span><span class="st"> </span>(<span class="kw">log</span>(<span class="dv">2</span>) <span class="op">*</span><span class="st"> </span>he)) <span class="op">*</span><span class="st"> </span>he_se
log2_she_se &lt;-<span class="st"> </span><span class="kw">abs</span>(<span class="dv">1</span> <span class="op">/</span><span class="st"> </span>(<span class="kw">log</span>(<span class="dv">2</span>) <span class="op">*</span><span class="st"> </span>she)) <span class="op">*</span><span class="st"> </span>she_se</code></pre></div>
<p>These formulas follow from using a Taylor expansion of <code>log2</code> around the estimate, using that the derivative of <code>log2(x)</code> is <code>1 / (log(2) * x)</code>.</p>
<p>Finally, for the standard error of <code>log2_ratio</code>, we assume that the <code>log2_he</code> and <code>log2_she</code> estimates are approximately independent, so that the variance of their difference is the sum of their variances. This gives a formula for the standard error of the log ratio:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">log2_ratio_se &lt;-<span class="st"> </span><span class="kw">sqrt</span>(log2_he_se<span class="op">^</span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>log2_she_se<span class="op">^</span><span class="dv">2</span>)</code></pre></div>
<p>Here are all of the estimated log ratios, along, with error bars for those that are statistically significantly different from zero.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># put the estimates in increasing order</span>
r &lt;-<span class="st"> </span><span class="kw">rank</span>(log2_ratio, <span class="dt">ties.method =</span> <span class="st">"first"</span>)

<span class="co"># find the statistically significant cases</span>
signif &lt;-<span class="st"> </span>(<span class="kw">abs</span>(log2_ratio) <span class="op">/</span><span class="st"> </span>log2_ratio_se <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span>)
i &lt;-<span class="st"> </span>signif

<span class="co"># set up the plot</span>
xlim &lt;-<span class="st"> </span>xlim &lt;-<span class="st"> </span><span class="kw">range</span>(r)
ylim &lt;-<span class="st"> </span><span class="kw">range</span>(log2_ratio,
              (log2_ratio <span class="op">-</span><span class="st"> </span>log2_ratio_se)[i],
              (log2_ratio <span class="op">+</span><span class="st"> </span>log2_ratio_se)[i])
<span class="kw">plot</span>(xlim, ylim, <span class="dt">type =</span> <span class="st">"n"</span>, <span class="dt">xlab =</span> <span class="st">"Rank"</span>,
     <span class="dt">ylab =</span> <span class="kw">expression</span>(<span class="kw">paste</span>(Log[<span class="dv">2</span>], <span class="st">" (She / He) Usage Rate"</span>)))

<span class="co"># horizontal line at zero</span>
<span class="kw">abline</span>(<span class="dt">h =</span> <span class="dv">0</span>, <span class="dt">col =</span> <span class="st">"gray"</span>, <span class="dt">lty =</span> <span class="dv">2</span>)

<span class="co"># standard error around interesting points</span>
<span class="kw">segments</span>(r[i], (log2_ratio <span class="op">-</span><span class="st"> </span>log2_ratio_se)[i],
         r[i], (log2_ratio <span class="op">+</span><span class="st"> </span>log2_ratio_se)[i])
<span class="kw">segments</span>((r <span class="op">-</span><span class="st"> </span><span class="fl">0.4</span>)[i], (log2_ratio <span class="op">-</span><span class="st"> </span>log2_ratio_se)[i],
         (r <span class="op">+</span><span class="st"> </span><span class="fl">0.4</span>)[i], (log2_ratio <span class="op">-</span><span class="st"> </span>log2_ratio_se)[i])
<span class="kw">segments</span>((r <span class="op">-</span><span class="st"> </span><span class="fl">0.4</span>)[i], (log2_ratio <span class="op">+</span><span class="st"> </span>log2_ratio_se)[i],
         (r <span class="op">+</span><span class="st"> </span><span class="fl">0.4</span>)[i], (log2_ratio <span class="op">+</span><span class="st"> </span>log2_ratio_se)[i])

<span class="co"># points at the estimates</span>
<span class="kw">points</span>(r, log2_ratio, <span class="dt">col =</span> <span class="dv">2</span>, <span class="dt">cex =</span> <span class="fl">0.5</span>)</code></pre></div>
<div class="figure">
<img src="gender-estimates_se-1.png" alt="Rate Ratio Estimates, with Error Bars"><p class="caption">Rate Ratio Estimates, with Error Bars</p>
</div>
<p>Notice that many of the more extreme estimates are not statistically significant. One word with a large estimate not deemed statistically significant is the word “expressed”. Here are the counts for that word, along with the log ratio estimate and standard error:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(terms[<span class="st">"expressed"</span>,])</code></pre></div>
<pre><code> he she 
  9   5 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(log2_ratio[[<span class="st">"expressed"</span>]])</code></pre></div>
<pre><code>[1] -1.287327</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(log2_ratio_se[[<span class="st">"expressed"</span>]])</code></pre></div>
<pre><code>[1] 0.7727118</code></pre>
<p>This is a word with a large imbalance, but only in a relatively small number of samples. Due to the lack of data for the word “expressed”, we deem this imbalance to not be statistically significant. Compare this to the word “felt”:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(terms[<span class="st">"felt"</span>,])</code></pre></div>
<pre><code> he she 
 36 189 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(log2_ratio[[<span class="st">"felt"</span>]])</code></pre></div>
<pre><code>[1] 1.877398</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(log2_ratio_se[[<span class="st">"felt"</span>]])</code></pre></div>
<pre><code>[1] 0.2598236</code></pre>
<p>This has an effect size estimate on the same order as “stopped”, but the estimate is much more reliable given the larger number of appearances of the word “felt”. We judge “felt” both to have a practically significant difference <em>and</em> a statistically significant difference.</p>
<p>The word “was” exhibits one other extreme:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(terms[<span class="st">"was"</span>,])</code></pre></div>
<pre><code>  he  she 
 891 1378 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(log2_ratio[[<span class="st">"was"</span>]])</code></pre></div>
<pre><code>[1] 0.1299613</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(log2_ratio_se[[<span class="st">"was"</span>]])</code></pre></div>
<pre><code>[1] 0.05776495</code></pre>
<p>This word has only a minor difference between “he” and “she”, but it shows up often enough for us to get a reliable estimate of the difference. The word “was” has a statistically significant difference between the genders, but probably not a practically significant difference.</p>
<p>In the context of our application, a word is practically significance if the absolute value of its estimate is large. This difference is statistically significant if the estimate is large relative to its standard error. If we only care about Austen’s writing in these six novels, we may not care about statistical significance. If, however, we want to make a statement about Austen’s writing style in general, then we want to generalize beyond our data set, and we should only do so for words we can get reliable estimates for.</p>
</div>
<div id="results" class="section level2">
<h2 class="hasAnchor">
<a href="#results" class="anchor"></a>Results</h2>
<p>Here are the estimates for the words with statistically significant gender imbalances, defined s having an estimated log ratio more than two standard errors away from zero.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># order by log ratio, then name</span>
o &lt;-<span class="st"> </span><span class="kw">order</span>(log2_ratio, <span class="kw">names</span>(log2_ratio))
est &lt;-<span class="st"> </span>log2_ratio[o]
se &lt;-<span class="st"> </span>log2_ratio_se[o]

<span class="co"># only keep statistically significant cases</span>
signif &lt;-<span class="st"> </span>(<span class="kw">abs</span>(est) <span class="op">/</span><span class="st"> </span>se <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span>)
est &lt;-<span class="st"> </span>est[signif]
se &lt;-<span class="st"> </span>se[signif]

<span class="co"># find practically significant cases</span>
pract &lt;-<span class="st"> </span><span class="kw">abs</span>(est) <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>

<span class="co"># get the terms</span>
term &lt;-<span class="st"> </span><span class="kw">names</span>(est)
i &lt;-<span class="st"> </span><span class="kw">seq_along</span>(term)

<span class="co"># set up the plot</span>
<span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">2</span>, <span class="dv">2</span>) <span class="op">+</span><span class="st"> </span><span class="fl">0.1</span>)
xlim &lt;-<span class="st"> </span><span class="kw">range</span>(est <span class="op">-</span><span class="st"> </span>se, est <span class="op">+</span><span class="st"> </span>se)
ylim &lt;-<span class="st"> </span><span class="kw">range</span>(i)
<span class="kw">plot</span>(xlim, ylim, <span class="dt">type =</span> <span class="st">"n"</span>,
     <span class="dt">xlab =</span> <span class="st">"Relative appearance after 'she' compared to 'he'"</span>,
     <span class="dt">ylab =</span> <span class="st">""</span>, <span class="dt">axes =</span> <span class="ot">FALSE</span>)

<span class="co"># x-axis</span>
ticks &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="op">-</span><span class="dv">3</span>, <span class="dv">6</span>)
labels =<span class="st"> </span><span class="kw">paste0</span>(<span class="dv">2</span> <span class="op">^</span><span class="st"> </span>ticks, <span class="st">"x"</span>)
labels[ticks <span class="op">==</span><span class="st"> </span><span class="dv">0</span>] &lt;-<span class="st"> "Same"</span>
<span class="kw">axis</span>(<span class="dv">1</span>, <span class="dt">at =</span> ticks, <span class="dt">labels =</span> labels)
<span class="kw">abline</span>(<span class="dt">v =</span> ticks, <span class="dt">col =</span> <span class="st">"gray"</span>, <span class="dt">lwd =</span> <span class="fl">0.5</span>)

<span class="co"># y-axis, with term labels</span>
<span class="kw">axis</span>(<span class="dv">2</span>, <span class="dt">at =</span> i, <span class="dt">labels =</span> term, <span class="dt">las =</span> <span class="dv">1</span>)
<span class="kw">abline</span>(<span class="dt">h =</span> i, <span class="dt">lty =</span> <span class="dv">3</span>, <span class="dt">col =</span> <span class="st">"gray"</span>)

<span class="co"># frame the plot</span>
<span class="kw">box</span>()

<span class="co"># standard errors</span>
col &lt;-<span class="st"> </span><span class="kw">ifelse</span>(est <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>, <span class="dv">3</span>, <span class="dv">4</span>)
<span class="kw">segments</span>(est <span class="op">-</span><span class="st"> </span>se, i, est <span class="op">+</span><span class="st"> </span>se, i, <span class="dt">lwd =</span> <span class="fl">1.5</span>, <span class="dt">col =</span> col)
<span class="kw">segments</span>(est <span class="op">-</span><span class="st"> </span>se, i <span class="op">-</span><span class="st"> </span><span class="fl">0.2</span>, est <span class="op">-</span><span class="st"> </span>se, i <span class="op">+</span><span class="st"> </span><span class="fl">0.2</span>, <span class="dt">lwd =</span> <span class="fl">1.5</span>, <span class="dt">col =</span> col)
<span class="kw">segments</span>(est <span class="op">+</span><span class="st"> </span>se, i <span class="op">-</span><span class="st"> </span><span class="fl">0.2</span>, est <span class="op">+</span><span class="st"> </span>se, i <span class="op">+</span><span class="st"> </span><span class="fl">0.2</span>, <span class="dt">lwd =</span> <span class="fl">1.5</span>, <span class="dt">col =</span> col)

<span class="co"># estimates</span>
<span class="kw">points</span>(est, i, <span class="dt">pch =</span> <span class="dv">16</span>, <span class="dt">cex =</span> <span class="fl">0.75</span>, <span class="dt">col =</span> col)</code></pre></div>
<div class="figure">
<img src="gender-signif-1.png" alt="Statistically Significant Gender Imbalances"><p class="caption">Statistically Significant Gender Imbalances</p>
</div>
<p>Not all of these are practically significant. Words like “should”, “will”, and “was” show up because they are common, and it is possible to get precise estimates of their gender imbalances. Still, we can see many examples of words that have both statistically and practically meaningful gender imbalances, especially “she”-slanted words like “remembered”, “read”, “resolved”, and “felt”.</p>
<p>In Silge’s original analysis, she used an ad-hoc filter of statistical significance, considering only words that appeared more than 10 times in the corpus. Her filter does a reasonable job of removing spurious results. Indeed, her list of the most gender-associated words mostly agrees with those reported here. There are, however, some notable differences. Silge’s list of “he” words does not include “begged”, but it does include “stopt”, “shook”, “expressed”, and “wants”. Similarly, Silge’s list of top “she” words includes some words that are excluded here: “longed”, “instantly”, “expected”, “ran” and “caught”.</p>
<p>I suspect that many of the words here have gender imbalances simply because the protagonists are female. The novels give us insights into the protagonists’ emotional states, but not into those of the supporting characters. It would be nice if we could get more balanced comparison by adjusting for the genders of the protagonists. Until we do that, it’s hard to know if there’s anything meaningful in these differences.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#overview">Overview</a></li>
      <li><a href="#gender-bigrams-in-austens-novels">Gender bigrams in Austen’s novels</a></li>
      <li><a href="#gender-specific-usage-rates">Gender-specific usage rates</a></li>
      <li><a href="#uncertainty-quantification">Uncertainty quantification</a></li>
      <li><a href="#results">Results</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Patrick O. Perry.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
